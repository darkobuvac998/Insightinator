"use strict";(()=>{(self.webpackChunkcxjs_tailwind_template=self.webpackChunkcxjs_tailwind_template||[]).push([[417],{6240:(A,M,p)=>{p.d(M,{p:()=>d});var U=p(2750),C=p(4909),I=p(8376),v=p(1099),R=p(485),O=p(5893);function T(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function h(t){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(t)}function w(t,e){if(!T(t,e))throw new TypeError("Cannot call a class as a function")}function j(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,B(o.key),o)}}function E(t,e,r){return e&&j(t.prototype,e),r&&j(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function B(t){var e=m(t,"string");return h(e)==="symbol"?e:String(e)}function m(t,e){if(h(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(h(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P(){return typeof Reflect<"u"&&Reflect.get?P=Reflect.get.bind():P=function(e,r,o){var n=W(e,r);if(n){var a=Object.getOwnPropertyDescriptor(n,r);return a.get?a.get.call(arguments.length<3?e:o):a.value}},P.apply(this,arguments)}function W(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=c(t),t!==null););return t}function S(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}function D(t,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,n){return o.__proto__=n,o},D(t,e)}function k(t){var e=y();return function(){var o=c(t),n;if(e){var a=c(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return K(this,n)}}function K(t,e){if(e&&(h(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L(t)}function L(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c(t)}var d=function(t){S(r,t);var e=k(r);function r(){return w(this,r),e.apply(this,arguments)}return E(r,[{key:"declareData",value:function(){var n;(n=P(c(r.prototype),"declareData",this)).call.apply(n,[this,{disabled:void 0,enabled:void 0,text:void 0,url:void 0,icon:void 0,accept:void 0}].concat(Array.prototype.slice.call(arguments)))}},{key:"renderInput",value:function(n,a,i){var l=a.data;return(0,O.jsx)(N,{instance:a,children:l.text||this.renderChildren(n,a)},i)}}]),r}(I.g);d.prototype.baseClass="uploadbutton",d.prototype.multiple=!1,d.prototype.method="POST",d.prototype.abortOnDestroy=!1,d.prototype.uploadInProgressText="Upload is in progress.",R.W.registerPrototype("cx/widgets/UploadButton",d);var N=function(t){S(r,t);var e=k(r);function r(o){var n;return w(this,r),n=e.call(this,o),n.uploads={},n.state={progress:100,uploadKey:0},n}return E(r,[{key:"render",value:function(){var n=this,a=this.props,i=a.instance,l=a.children,u=i.widget,s=i.data,f=u.CSS,_=u.baseClass,x,g=s.classNames;return s.icon&&(x=C.J.render(s.icon,{className:f.element(_,"icon")}),g=f.expand(g,f.state("icon"),l.length==0&&f.state("empty"))),(0,O.jsxs)("div",{ref:function(b){n.el=b},className:g,style:s.style,children:[(0,O.jsx)("div",{className:f.element(_,"progress",{done:this.state.progress==100}),style:{width:"".concat(this.state.progress,"%")}},"progress"),x,l,!s.disabled&&(0,O.jsx)("input",{className:f.element(_,"input"),type:"file",title:" ",accept:s.accept,multiple:u.multiple,tabIndex:s.tabIndex,onChange:this.onFileSelected.bind(this)},this.state.uploadKey)]})}},{key:"onFileSelected",value:function(n){for(var a=n.dataTransfer?n.dataTransfer.files:n.target?n.target.files:[],i=0;i<a.length;i++)this.uploadFile(a[i])}},{key:"componentDidMount",value:function(){this.props.instance.data.autoFocus&&this.el.focus()}},{key:"componentWillUnmount",value:function(){if(this.props.instance.widget.abortOnDestroy)for(var n in this.uploads){var a=this.uploads[n];a.xhr.abort()}}},{key:"uploadFile",value:function(n){var a=this,i=this.props.instance,l=i.data,u=i.widget;u.onResolveUrl?Promise.resolve(i.invoke("onResolveUrl",n,i)).then(function(s){a.doUpload(n,s)}):this.doUpload(n,l.url)}},{key:"doUpload",value:function(n,a){var i=this,l=this.props.instance,u=l.widget;if(!a)throw new Error("Upload URL not set.");var s=new XMLHttpRequest;s.open(u.method,v.R.resolve(a));var f=new FormData;f.append("file",n);var _=this.state.uploadKey;this.setState({uploadKey:_+1});var x=u.onUploadStarting?l.invoke("onUploadStarting",s,l,n,f):!0;Promise.resolve(x).then(function(g){if(g!==!1){var F=i.uploads[_]={progress:0,size:n.size||1,file:n,xhr:s};s.onload=function(){delete i.uploads[_],u.onUploadComplete&&l.invoke("onUploadComplete",s,l,n,f),i.reportProgress()},s.onerror=function(b){delete i.uploads[_],u.onUploadError&&l.invoke("onUploadError",b,l,n,f),i.reportProgress()},s.upload.onprogress=function(b){b.lengthComputable&&(F.progress=b.loaded/b.total,i.reportProgress(),u.onUploadProgress&&l.invoke("onUploadProgress",b,l,n,f))},s.send(f)}}).catch(function(g){u.onUploadError?l.invoke("onUploadError",g,l,n,f):console.error("Unhandled upload error.",g)}),this.reportProgress()}},{key:"reportProgress",value:function(){var n=0,a=0;for(var i in this.uploads){var l=this.uploads[i];n+=l.size,a+=l.size*l.progress}var u=100*(n?a/n:1);this.props.instance.setState({inputError:u==100?!1:this.props.instance.uploadInProgressText}),this.setState({progress:Math.max(.001,Math.floor(u))})}}]),r}(U.lP.Component);U.$L.alias("upload-button",d)},2403:(A,M,p)=>{p.d(M,{F:()=>c});var U=p(4366),C=p(3725);function I(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function v(t){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(t)}function R(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,o)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R(Object(r),!0).forEach(function(o){T(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function T(t,e,r){return e=E(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e){if(!I(t,e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,E(o.key),o)}}function j(t,e,r){return e&&w(t.prototype,e),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function E(t){var e=B(t,"string");return v(e)==="symbol"?e:String(e)}function B(t,e){if(v(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(v(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m(){return typeof Reflect<"u"&&Reflect.get?m=Reflect.get.bind():m=function(e,r,o){var n=P(e,r);if(n){var a=Object.getOwnPropertyDescriptor(n,r);return a.get?a.get.call(arguments.length<3?e:o):a.value}},m.apply(this,arguments)}function P(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=y(t),t!==null););return t}function W(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,n){return o.__proto__=n,o},S(t,e)}function D(t){var e=L();return function(){var o=y(t),n;if(e){var a=y(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return k(this,n)}}function k(t,e){if(e&&(v(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K(t)}function K(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},y(t)}var c=function(t){W(r,t);var e=D(r);function r(){return h(this,r),e.apply(this,arguments)}return j(r,[{key:"init",value:function(){this.message&&(this.items={type:C.x,value:this.message}),m(y(r.prototype),"init",this).call(this)}},{key:"declareData",value:function(){var n;return(n=m(y(r.prototype),"declareData",this)).call.apply(n,[this].concat(Array.prototype.slice.call(arguments),[{timeout:void 0}]))}},{key:"prepareData",value:function(n,a){var i=a.data;i.stateMods=O(O({},i.stateMods),{},{pad:this.pad}),m(y(r.prototype),"prepareData",this).call(this,n,a)}},{key:"overlayDidUpdate",value:function(n,a){var i=a.containerEl||a.props.parentEl;a.state.animated&&(i.style.height="".concat(a.el.offsetHeight,"px"),i.classList.add(this.CSS.state("live")))}},{key:"overlayDidMount",value:function(n,a){var i=n.data;i.timeout>0&&(a.timeoutTimer=setTimeout(function(){n.dismiss()},i.timeout))}},{key:"overlayWillDismiss",value:function(n,a){var i=a.containerEl||a.props.parentEl;i.style.height=0,i.classList.remove(this.CSS.state("live"))}},{key:"overlayWillUnmount",value:function(n,a){var i=a.containerEl||a.props.parentEl;i.style.height=0,i.classList.remove(this.CSS.state("live")),a.timeoutTimer&&clearTimeout(a.timeoutTimer)}},{key:"containerFactory",value:function(){var n=document.createElement("div");n.className=this.CSS.element("toaster","item");var a=this.placement||"top",i=N(a);return i.el.className=this.CSS.block("toaster",null,T({},"placement-".concat(a),!0)),i.el.insertBefore(n,i.el.firstChild),n}}]),r}(U.a),d={};function N(t){var e=d[t];if(!e){var r=document.createElement("div");document.body.appendChild(r),e=d[t]={el:r}}return e}c.prototype.styled=!0,c.prototype.pad=!0,c.prototype.animate=!0,c.prototype.baseClass="toast",c.prototype.placement="top",c.prototype.destroyDelay=300}}]);})();
