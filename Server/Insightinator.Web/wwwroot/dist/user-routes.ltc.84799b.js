"use strict";(()=>{(self.webpackChunkcxjs_tailwind_template=self.webpackChunkcxjs_tailwind_template||[]).push([[236],{4005:(jt,J,b)=>{b.r(J),b.d(J,{default:()=>Pt});var q=b(1766),tt=b(4138),x=b(9375),et=b(3391),rt=b(9909),I=b(8955),nt=b(6240),ot=b(6964),it=b(9383),at=b(2403);function ut(e,r){return r!=null&&typeof Symbol<"u"&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](e):e instanceof r}function $(e){"@babel/helpers - typeof";return $=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$(e)}function st(e,r){if(!ut(e,r))throw new TypeError("Cannot call a class as a function")}function K(e,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,ct(l.key),l)}}function lt(e,r,a){return r&&K(e.prototype,r),a&&K(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function ct(e){var r=ft(e,"string");return $(r)==="symbol"?r:String(r)}function ft(e,r){if($(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var l=a.call(e,r||"default");if($(l)!=="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function k(){return typeof Reflect<"u"&&Reflect.get?k=Reflect.get.bind():k=function(r,a,l){var c=pt(r,a);if(c){var f=Object.getOwnPropertyDescriptor(c,a);return f.get?f.get.call(arguments.length<3?r:l):f.value}},k.apply(this,arguments)}function pt(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=j(e),e!==null););return e}function ht(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&B(e,r)}function B(e,r){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,c){return l.__proto__=c,l},B(e,r)}function yt(e){var r=mt();return function(){var l=j(e),c;if(r){var f=j(this).constructor;c=Reflect.construct(l,arguments,f)}else c=l.apply(this,arguments);return dt(this,c)}}function dt(e,r){if(r&&($(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vt(e)}function vt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},j(e)}var W=function(e){ht(a,e);var r=yt(a);function a(){return st(this,a),r.apply(this,arguments)}return lt(a,[{key:"declareData",value:function(){var c;return(c=k(j(a.prototype),"declareData",this)).call.apply(c,[this].concat(Array.prototype.slice.call(arguments),[{busyText:void 0}]))}},{key:"prepareData",value:function(c,f){var p=f.data,d=f.state;d&&d.running&&(p.icon="loading",p.busyText&&(p.text=p.busyText),p.disabled=!0),k(j(a.prototype),"prepareData",this).call(this,c,f)}},{key:"attachProps",value:function(c,f,p){delete p.busyText,k(j(a.prototype),"attachProps",this).call(this,c,f,p)}},{key:"init",value:function(){var c=this,f=this.onClick,p=function(h,O,v){return typeof h=="string"?v.invokeControllerMethod(h,O,v):h.call(this,O,v)};this.onClick=function(d,h){var O=f&&p(f,d,h);O&&(h.setState({running:!0}),Promise.resolve(O).then(function(v){return h.setState({running:!1}),v}).catch(function(v){switch(h.setState({running:!1}),c.errorHandling){case"none":throw v;case"console":console.log(v);break;case"alert":it.H.alert(v.toString());break;case"toast":{var G=at.F.create({message:v.toString(),timeout:5e3});G.open(c.store);break}}}))},k(j(a.prototype),"init",this).call(this)}}]),a}(ot.z);W.prototype.errorHandling="none";function gt(e,r){return r!=null&&typeof Symbol<"u"&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](e):e instanceof r}function M(e){"@babel/helpers - typeof";return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},M(e)}function D(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */var e=function(t,n,o){return Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[n]},r=function(t,n,o,s){var i=n&&gt(n.prototype,l)?n:l,y=Object.create(i.prototype),g=new G(s||[]);return R(y,"_invoke",{value:h(t,o,g)}),y},a=function(t,n,o){try{return{type:"normal",arg:t.call(n,o)}}catch(s){return{type:"throw",arg:s}}},l=function(){},c=function(){},f=function(){},p=function(t){["next","throw","return"].forEach(function(n){e(t,n,function(o){return this._invoke(n,o)})})},d=function(t,n){function o(i,y,g,m){var w=a(t[i],t,y);if(w.type!=="throw"){var E=w.arg,L=E.value;return L&&M(L)=="object"&&A.call(L,"__await")?n.resolve(L.__await).then(function(T){o("next",T,g,m)},function(T){o("throw",T,g,m)}):n.resolve(L).then(function(T){E.value=T,g(E)},function(T){return o("throw",T,g,m)})}m(w.arg)}var s;R(this,"_invoke",{value:function(y,g){function m(){return new n(function(w,E){o(y,g,w,E)})}return s=s?s.then(m,m):m()}})},h=function(t,n,o){var s="suspendedStart";return function(i,y){if(s==="executing")throw new Error("Generator is already running");if(s==="completed"){if(i==="throw")throw y;return V()}for(o.method=i,o.arg=y;;){var g=o.delegate;if(g){var m=Z(g,o);if(m){if(m===P)continue;return m}}if(o.method==="next")o.sent=o._sent=o.arg;else if(o.method==="throw"){if(s==="suspendedStart")throw s="completed",o.arg;o.dispatchException(o.arg)}else o.method==="return"&&o.abrupt("return",o.arg);s="executing";var w=a(t,n,o);if(w.type==="normal"){if(s=o.done?"completed":"suspendedYield",w.arg===P)continue;return{value:w.arg,done:o.done}}w.type==="throw"&&(s="completed",o.method="throw",o.arg=w.arg)}}},O=function(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)},v=function(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n},G=function(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)},U=function(t){if(t){var n=t[N];if(n)return n.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var o=-1,s=function i(){for(;++o<t.length;)if(A.call(t,o))return i.value=t[o],i.done=!1,i;return i.value=void 0,i.done=!0,i};return s.next=s}}return{next:V}},V=function(){return{value:void 0,done:!0}};D=function(){return S};var S={},X=Object.prototype,A=X.hasOwnProperty,R=Object.defineProperty||function(u,t,n){u[t]=n.value},H=typeof Symbol=="function"?Symbol:{},N=H.iterator||"@@iterator",xt=H.asyncIterator||"@@asyncIterator",z=H.toStringTag||"@@toStringTag";try{e({},"")}catch{e=function(n,o,s){return n[o]=s}}S.wrap=r;var P={},F={};e(F,N,function(){return this});var Y=Object.getPrototypeOf,C=Y&&Y(Y(U([])));C&&C!==X&&A.call(C,N)&&(F=C);var _=f.prototype=l.prototype=Object.create(F);function Z(u,t){var n=t.method,o=u.iterator[n];if(o===void 0)return t.delegate=null,n==="throw"&&u.iterator.return&&(t.method="return",t.arg=void 0,Z(u,t),t.method==="throw")||n!=="return"&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),P;var s=a(o,u.iterator,t.arg);if(s.type==="throw")return t.method="throw",t.arg=s.arg,t.delegate=null,P;var i=s.arg;return i?i.done?(t[u.resultName]=i.value,t.next=u.nextLoc,t.method!=="return"&&(t.method="next",t.arg=void 0),t.delegate=null,P):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,P)}return c.prototype=f,R(_,"constructor",{value:f,configurable:!0}),R(f,"constructor",{value:c,configurable:!0}),c.displayName=e(f,z,"GeneratorFunction"),S.isGeneratorFunction=function(u){var t=typeof u=="function"&&u.constructor;return!!t&&(t===c||(t.displayName||t.name)==="GeneratorFunction")},S.mark=function(u){return Object.setPrototypeOf?Object.setPrototypeOf(u,f):(u.__proto__=f,e(u,z,"GeneratorFunction")),u.prototype=Object.create(_),u},S.awrap=function(u){return{__await:u}},p(d.prototype),e(d.prototype,xt,function(){return this}),S.AsyncIterator=d,S.async=function(u,t,n,o,s){s===void 0&&(s=Promise);var i=new d(r(u,t,n,o),s);return S.isGeneratorFunction(t)?i:i.next().then(function(y){return y.done?y.value:i.next()})},p(_),e(_,z,"Generator"),e(_,N,function(){return this}),e(_,"toString",function(){return"[object Generator]"}),S.keys=function(u){var t=Object(u),n=[];for(var o in t)n.push(o);return n.reverse(),function s(){for(;n.length;){var i=n.pop();if(i in t)return s.value=i,s.done=!1,s}return s.done=!0,s}},S.values=U,G.prototype={constructor:G,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!t)for(var n in this)n.charAt(0)==="t"&&A.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(t){var n=function(E,L){return y.type="throw",y.arg=t,o.next=E,L&&(o.method="next",o.arg=void 0),!!L};if(this.done)throw t;for(var o=this,s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],y=i.completion;if(i.tryLoc==="root")return n("end");if(i.tryLoc<=this.prev){var g=A.call(i,"catchLoc"),m=A.call(i,"finallyLoc");if(g&&m){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(g){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!m)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,n){for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o];if(s.tryLoc<=this.prev&&A.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var i=s;break}}i&&(t==="break"||t==="continue")&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var y=i?i.completion:{};return y.type=t,y.arg=n,i?(this.method="next",this.next=i.finallyLoc,P):this.complete(y)},complete:function(t,n){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&n&&(this.next=n),P},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),v(o),P}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc===t){var s=o.completion;if(s.type==="throw"){var i=s.arg;v(o)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:U(t),resultName:n,nextLoc:o},this.method==="next"&&(this.arg=void 0),P}},S}function Q(e,r,a,l,c,f,p){try{var d=e[f](p),h=d.value}catch(O){a(O);return}d.done?r(h):Promise.resolve(h).then(l,c)}function bt(e){return function(){var r=this,a=arguments;return new Promise(function(l,c){var f=e.apply(r,a);function p(h){Q(f,l,c,p,d,"next",h)}function d(h){Q(f,l,c,p,d,"throw",h)}p(void 0)})}}function wt(e,r,a){if(a.type.indexOf("image/")!=0)return MsgBox.alert("Selected file is not an image file."),!1;if(a.size>5e6)return MsgBox.alert("Selected file is too large. The file should be smaller than 5 MB."),!1}function St(e,r){var a=r.store;if(e.status!=200){MsgBox.alert("Upload failed. Status ".concat(e.status,"."));return}var l=JSON.parse(e.responseText),c=l.picture_url;a.set("user.picture_url",c)}const Ot={$type:x.S,tag:"main",class:"min-h-full bg-gray-200 mt-16 py-3",jsxAttributes:["class"],children:[{$type:x.S,tag:"div",class:"container bg-white shadow rounded-lg px-6 pt-4 pb-8",jsxAttributes:["class"],children:[{$type:x.S,tag:"div",class:"flex",jsxAttributes:["class"],children:[{$type:x.S,tag:"div",children:[{$type:x.S,tag:"div",class:"mb-4 text-gray-800 font-semibold",jsxAttributes:["class"],children:["User Profile"]},{$type:et.G,labelClass:"w-24",jsxAttributes:["labelClass"],children:[{$type:rt.g,bind:"user",useParentLayout:!0,jsxAttributes:["bind","useParentLayout"],children:[{$type:I.n,value:{bind:"email"},required:!0,label:"Email",viewMode:!0,jsxAttributes:["value","required","label","viewMode"]},{$type:I.n,value:{bind:"first_name"},required:!0,label:"First Name",jsxAttributes:["value","required","label"]},{$type:I.n,value:{bind:"last_name"},required:!0,label:"Last Name",jsxAttributes:["value","required","label"]},{$type:W,onClick:function(){var e=function(l,c){return r.apply(this,arguments)},r=bt(D().mark(function a(l,c){var f,p,d,h;return D().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:f=c.store,p=f.getData(),d=p.first_name,h=p.last_name,f.set("$root.user",user);case 3:case"end":return v.stop()}},a)}));return e}(),jsxAttributes:["onClick"],children:[" Save "]}]}]}]},{$type:x.S,tag:"div",class:"ml-20",jsxAttributes:["class"],children:[{$type:x.S,tag:"div",class:"mb-4",jsxAttributes:["class"],children:["Photo"]},{$type:x.S,tag:"div",class:"w-32 h-32 bg-gray-300 relative border-4 border-gray-400 box-content",jsxAttributes:["class"],children:[{$type:x.S,tag:"img",src:{tpl:"{user.picture_url}?tr=h-128"},visible:{expr:"!!{user.picture_url}"},class:"absolute w-full h-full object-cover top-0 left-0",jsxAttributes:["src","visible","class"]}]},{$type:nt.p,url:"~/api/account/picture",onUploadStarting:wt,onUploadComplete:St,class:"mt-2",accept:"image/*",jsxAttributes:["url","onUploadStarting","onUploadComplete","class","accept"],children:[" Upload "]}]}]}]}]},Pt={$type:q.A,route:"~/user",url:{bind:"url"},prefix:!0,jsxAttributes:["route","url","prefix"],children:[{$type:tt.O,route:"~/user/profile",jsxAttributes:["route"],children:[{$type:Ot}]}]}}}]);})();
